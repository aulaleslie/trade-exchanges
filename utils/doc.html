<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.5" />
  <meta charset="utf-8" />
</head>
<body>

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

<h1>utils</h1>

<pre><code class="language-go">import &quot;github.com/aulaleslie/trade-exchanges/utils&quot;
</code></pre>

<h2>Index</h2>

<ul>
<li><a href="#constants">Constants</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#func-abs">func Abs(a *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-add">func Add(a, b *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-div">func Div(a, b *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-eq">func Eq(a, b *apd.Decimal) bool</a></li>
<li><a href="#func-fromfloat64">func FromFloat64(x float64) *apd.Decimal</a></li>
<li><a href="#func-fromstring">func FromString(x string) *apd.Decimal</a></li>
<li><a href="#func-fromstringerr">func FromStringErr(x string) (*apd.Decimal, error)</a></li>
<li><a href="#func-fromuint">func FromUint(x uint) *apd.Decimal</a></li>
<li><a href="#func-greater">func Greater(a, b *apd.Decimal) bool</a></li>
<li><a href="#func-greateroreq">func GreaterOrEq(a, b *apd.Decimal) bool</a></li>
<li><a href="#func-less">func Less(a, b *apd.Decimal) bool</a></li>
<li><a href="#func-lessoreq">func LessOrEq(a, b *apd.Decimal) bool</a></li>
<li><a href="#func-minint">func MinInt(a, b int) int</a></li>
<li><a href="#func-mul">func Mul(a, b *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-neg">func Neg(a *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-newzero">func NewZero() *apd.Decimal</a></li>
<li><a href="#func-reduce">func Reduce(x *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-replaceerror">func ReplaceError(new, old error) error</a></li>
<li><a href="#func-round">func Round(a *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-sub">func Sub(a, b *apd.Decimal) *apd.Decimal</a></li>
<li><a href="#func-timeptr">func TimePtr(t time.Time) *time.Time</a></li>
<li><a href="#func-timeunixmillis">func TimeUNIXMillis(t time.Time) int64</a></li>
<li><a href="#func-toflatstring">func ToFlatString(x *apd.Decimal) string</a></li>
<li><a href="#func-tointegerinfloat64">func ToIntegerInFloat64(a *apd.Decimal) (float64, error)</a></li>
<li><a href="#func-wsconnectandwatch">func WSConnectAndWatch(ctx context.Context, cfg *WSConfig, lg *zap.Logger) (&lt;-chan WSMessage, error)</a></li>
<li><a href="#func-wswatch">func WSWatch(ctx context.Context, c *websocket.Conn, cfg *WSConfig, lg *zap.Logger) (&lt;-chan WSMessage, error)</a></li>
<li><a href="#type-apdjson">type APDJSON</a>

<ul>
<li><a href="#func-apdjson-unmarshaljson">func (num *APDJSON) UnmarshalJSON(in []byte) error</a></li>
</ul></li>
<li><a href="#type-cancellabletimer">type CancellableTimer</a>

<ul>
<li><a href="#func-newcancellabletimer">func NewCancellableTimer() *CancellableTimer</a></li>
<li><a href="#func-cancellabletimer-start">func (t *CancellableTimer) Start(d time.Duration)</a></li>
<li><a href="#func-cancellabletimer-stop">func (t *CancellableTimer) Stop()</a></li>
</ul></li>
<li><a href="#type-changeableminuteratelimiter">type ChangeableMinuteRateLimiter</a>

<ul>
<li><a href="#func-newchangeableminuteratelimiter">func NewChangeableMinuteRateLimiter(maxPerMinute int) *ChangeableMinuteRateLimiter</a></li>
<li><a href="#func-changeableminuteratelimiter-setnextduration">func (r *ChangeableMinuteRateLimiter) SetNextDuration(d time.Duration)</a></li>
<li><a href="#func-changeableminuteratelimiter-setremaining">func (r *ChangeableMinuteRateLimiter) SetRemaining(at time.Time, remaining uint)</a></li>
<li><a href="#func-changeableminuteratelimiter-wait">func (r *ChangeableMinuteRateLimiter) Wait()</a></li>
</ul></li>
<li><a href="#type-minuteratelimiter">type MinuteRateLimiter</a>

<ul>
<li><a href="#func-newminuteratelimiter">func NewMinuteRateLimiter(maxPerMinute int) *MinuteRateLimiter</a></li>
<li><a href="#func-minuteratelimiter-wait">func (r *MinuteRateLimiter) Wait()</a></li>
</ul></li>
<li><a href="#type-nulljsonvalue">type NullJSONValue</a>

<ul>
<li><a href="#func-nulljsonvalue-marshaljson">func (m *NullJSONValue) MarshalJSON() ([]byte, error)</a></li>
<li><a href="#func-nulljsonvalue-unmarshaljson">func (m *NullJSONValue) UnmarshalJSON(data []byte) error</a></li>
</ul></li>
<li><a href="#type-remainingforminute">type RemainingForMinute</a></li>
<li><a href="#type-wsconfig">type WSConfig</a></li>
<li><a href="#type-wsmessage">type WSMessage</a></li>
</ul>

<h2>Constants</h2>

<pre><code class="language-go">const MaxPreciseFloat64Integer int64 = 1 &lt;&lt; 53
</code></pre>

<pre><code class="language-go">const MinPreciseFloat64Integer int64 = -(1 &lt;&lt; 53)
</code></pre>

<h2>Variables</h2>

<pre><code class="language-go">var D10 *apd.Decimal = Reduce(apd.New(10, 0)) // Shoudln't be mutated
</code></pre>

<pre><code class="language-go">var D100 *apd.Decimal = Reduce(apd.New(100, 0)) // Shoudln't be mutated
</code></pre>

<pre><code class="language-go">var One *apd.Decimal = Reduce(apd.New(1, 0)) // Shoudln't be mutated
</code></pre>

<pre><code class="language-go">var Zero *apd.Decimal = Reduce(apd.New(0, 0)) // Shoudln't be mutated
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L98">Abs</a></h2>

<pre><code class="language-go">func Abs(a *apd.Decimal) *apd.Decimal
</code></pre>

<p>|a|</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L68">Add</a></h2>

<pre><code class="language-go">func Add(a, b *apd.Decimal) *apd.Decimal
</code></pre>

<p>a + b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L88">Div</a></h2>

<pre><code class="language-go">func Div(a, b *apd.Decimal) *apd.Decimal
</code></pre>

<p>a/b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L161">Eq</a></h2>

<pre><code class="language-go">func Eq(a, b *apd.Decimal) bool
</code></pre>

<p>a == b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L32">FromFloat64</a></h2>

<pre><code class="language-go">func FromFloat64(x float64) *apd.Decimal
</code></pre>

<p>Only 15 places precision</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L41">FromString</a></h2>

<pre><code class="language-go">func FromString(x string) *apd.Decimal
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L49">FromStringErr</a></h2>

<pre><code class="language-go">func FromStringErr(x string) (*apd.Decimal, error)
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L27">FromUint</a></h2>

<pre><code class="language-go">func FromUint(x uint) *apd.Decimal
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L151">Greater</a></h2>

<pre><code class="language-go">func Greater(a, b *apd.Decimal) bool
</code></pre>

<p>a &gt; b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L156">GreaterOrEq</a></h2>

<pre><code class="language-go">func GreaterOrEq(a, b *apd.Decimal) bool
</code></pre>

<p>a &gt;= b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L141">Less</a></h2>

<pre><code class="language-go">func Less(a, b *apd.Decimal) bool
</code></pre>

<p>a &lt; b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L146">LessOrEq</a></h2>

<pre><code class="language-go">func LessOrEq(a, b *apd.Decimal) bool
</code></pre>

<p>a &lt;= b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/numbers.go#L3">MinInt</a></h2>

<pre><code class="language-go">func MinInt(a, b int) int
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L78">Mul</a></h2>

<pre><code class="language-go">func Mul(a, b *apd.Decimal) *apd.Decimal
</code></pre>

<p>a/b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L108">Neg</a></h2>

<pre><code class="language-go">func Neg(a *apd.Decimal) *apd.Decimal
</code></pre>

<p>-a</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L23">NewZero</a></h2>

<pre><code class="language-go">func NewZero() *apd.Decimal
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L17">Reduce</a></h2>

<pre><code class="language-go">func Reduce(x *apd.Decimal) *apd.Decimal
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/errors.go#L7">ReplaceError</a></h2>

<pre><code class="language-go">func ReplaceError(new, old error) error
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L117">Round</a></h2>

<pre><code class="language-go">func Round(a *apd.Decimal) *apd.Decimal
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L58">Sub</a></h2>

<pre><code class="language-go">func Sub(a, b *apd.Decimal) *apd.Decimal
</code></pre>

<p>a - b</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L70">TimePtr</a></h2>

<pre><code class="language-go">func TimePtr(t time.Time) *time.Time
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L66">TimeUNIXMillis</a></h2>

<pre><code class="language-go">func TimeUNIXMillis(t time.Time) int64
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L168">ToFlatString</a></h2>

<pre><code class="language-go">func ToFlatString(x *apd.Decimal) string
</code></pre>

<p>Returns flat\, non scientific string representation 1000 will be &ldquo;1000&rdquo; not like this &ldquo;1E3&rdquo; 0.001 will be as &ldquo;0.001&rdquo; not like &ldquo;1E-3&rdquo;</p>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/decimal_utils.go#L129">ToIntegerInFloat64</a></h2>

<pre><code class="language-go">func ToIntegerInFloat64(a *apd.Decimal) (float64, error)
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/websocket.go#L27">WSConnectAndWatch</a></h2>

<pre><code class="language-go">func WSConnectAndWatch(ctx context.Context, cfg *WSConfig, lg *zap.Logger) (&lt;-chan WSMessage, error)
</code></pre>

<h2>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/websocket.go#L39">WSWatch</a></h2>

<pre><code class="language-go">func WSWatch(ctx context.Context, c *websocket.Conn, cfg *WSConfig, lg *zap.Logger) (&lt;-chan WSMessage, error)
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/json.go#L24-L26">APDJSON</a></h2>

<pre><code class="language-go">type APDJSON struct {
    Value *apd.Decimal
}
</code></pre>

<h3>func (*APDJSON) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/json.go#L30">UnmarshalJSON</a></h3>

<pre><code class="language-go">func (num *APDJSON) UnmarshalJSON(in []byte) error
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L10-L17">CancellableTimer</a></h2>

<pre><code class="language-go">type CancellableTimer struct {
    C chan struct{}
    // contains filtered or unexported fields
}
</code></pre>

<h3>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L19">NewCancellableTimer</a></h3>

<pre><code class="language-go">func NewCancellableTimer() *CancellableTimer
</code></pre>

<h3>func (*CancellableTimer) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L28">Start</a></h3>

<pre><code class="language-go">func (t *CancellableTimer) Start(d time.Duration)
</code></pre>

<h3>func (*CancellableTimer) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/time_utils.go#L53">Stop</a></h3>

<pre><code class="language-go">func (t *CancellableTimer) Stop()
</code></pre>

<p>Stop can be called many times. Works on already stopeed timer.</p>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L70-L79">ChangeableMinuteRateLimiter</a></h2>

<pre><code class="language-go">type ChangeableMinuteRateLimiter struct {
    // contains filtered or unexported fields
}
</code></pre>

<h3>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L81">NewChangeableMinuteRateLimiter</a></h3>

<pre><code class="language-go">func NewChangeableMinuteRateLimiter(maxPerMinute int) *ChangeableMinuteRateLimiter
</code></pre>

<h3>func (*ChangeableMinuteRateLimiter) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L103">SetNextDuration</a></h3>

<pre><code class="language-go">func (r *ChangeableMinuteRateLimiter) SetNextDuration(d time.Duration)
</code></pre>

<h3>func (*ChangeableMinuteRateLimiter) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L89">SetRemaining</a></h3>

<pre><code class="language-go">func (r *ChangeableMinuteRateLimiter) SetRemaining(at time.Time, remaining uint)
</code></pre>

<h3>func (*ChangeableMinuteRateLimiter) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L108">Wait</a></h3>

<pre><code class="language-go">func (r *ChangeableMinuteRateLimiter) Wait()
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L12-L17">MinuteRateLimiter</a></h2>

<pre><code class="language-go">type MinuteRateLimiter struct {
    // contains filtered or unexported fields
}
</code></pre>

<h3>func <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L19">NewMinuteRateLimiter</a></h3>

<pre><code class="language-go">func NewMinuteRateLimiter(maxPerMinute int) *MinuteRateLimiter
</code></pre>

<h3>func (*MinuteRateLimiter) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L26">Wait</a></h3>

<pre><code class="language-go">func (r *MinuteRateLimiter) Wait()
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/json.go#L11">NullJSONValue</a></h2>

<p>NullJSONValue is used as workaround for Golang&rsquo;s case-insensitive JSON</p>

<pre><code class="language-go">type NullJSONValue struct{}
</code></pre>

<h3>func (*NullJSONValue) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/json.go#L13">MarshalJSON</a></h3>

<pre><code class="language-go">func (m *NullJSONValue) MarshalJSON() ([]byte, error)
</code></pre>

<h3>func (*NullJSONValue) <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/json.go#L17">UnmarshalJSON</a></h3>

<pre><code class="language-go">func (m *NullJSONValue) UnmarshalJSON(data []byte) error
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/minute_ratelimiter.go#L65-L68">RemainingForMinute</a></h2>

<pre><code class="language-go">type RemainingForMinute struct {
    // contains filtered or unexported fields
}
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/websocket.go#L19-L25">WSConfig</a></h2>

<p>WSConfig webservice configuration</p>

<pre><code class="language-go">type WSConfig struct {
    Endpoint           string
    InitialTextMessage []byte
    KeepAlive          bool
    Timeout            time.Duration
    HeartbeatInterval  time.Duration
}
</code></pre>

<h2>type <a href="https://github.com/aulaleslie/trade-exchanges/blob/master/utils/websocket.go#L13-L16">WSMessage</a></h2>

<pre><code class="language-go">type WSMessage struct {
    Payload             []byte
    DisconnectedWithErr error
}
</code></pre>

<p>Generated by <a href="https://github.com/princjef/gomarkdoc">gomarkdoc</a></p>

</body>
</html>
